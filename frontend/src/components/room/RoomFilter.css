/* Wrapper nhẹ nhàng, không che dropdown */
.rf-wrap { position: relative; }

/* Pill chính: chia cột đều, KHÔNG overflow hidden để menu không bị cắt */
.rf-pill{
  position: relative;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 1fr;          /* mỗi segment chiếm đều */
  align-items: stretch;
  gap: 0;
  background: #f3f5f6;
  border: 1px solid #e5e7eb;
  border-radius: 999px;
  padding: 0;                      /* bỏ padding để nút apply full-height */
  box-shadow: 0 6px 18px rgba(0,0,0,.12);
  overflow: visible;               /* QUAN TRỌNG: cho menu rơi ra ngoài */
  z-index: 2;
}

/* Segment */
.rf-seg{
  position: relative;
  min-width: 0;
  padding: 14px 18px;
}
.rf-seg[data-open="true"]{ z-index: 30; } /* kéo segment đang mở lên trên */

.rf-head{
  display: grid;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto auto;
  row-gap: 2px;
  column-gap: 12px;
  cursor: pointer;
  outline: none;
}
.rf-head:focus-visible{ box-shadow: 0 0 0 3px rgba(19,189,194,.25); border-radius: 10px; }

.rf-label{ font-size:14px; font-weight:700; color:#2fb8bf; }
.rf-value{ font-size:22px; font-weight:800; color:#0f172a; letter-spacing:.2px; }

.rf-caret{
  grid-column:2/3; grid-row:1/3; align-self:center;
  width:10px; height:10px;
  border-right:2px solid #2fb8bf; border-bottom:2px solid #2fb8bf;
  transform: rotate(45deg);
  transition: transform .15s ease;
}
.rf-caret.open{ transform: rotate(-135deg); }

/* Dropdown menu: nổi hẳn lên, không bị bóng đổ che */
.rf-menu{
  position:absolute; top: calc(100% + 8px); left: 12px;
  min-width: 240px;
  background:#fff;
  border:1px solid #e5e7eb; border-radius:14px;
  box-shadow:0 12px 28px rgba(0,0,0,.16);
  padding:6px; z-index: 40;
}
.rf-option{
  padding:10px 12px; border-radius:10px;
  display:flex; justify-content:space-between; align-items:center;
  color:#0f172a; cursor:pointer;
}
.rf-option:hover{ background:#f3fafb; }
.rf-option.selected{ background:#e8fbfd; font-weight:600; }
.rf-check{ color:#2fb8bf; font-weight:800; }

/* Vạch chia giữa các segment */
.rf-divider{
  position:absolute; right:0; top:8px; bottom:8px; width:1px;
  background: linear-gradient(180deg, transparent, #e2e8f0, transparent);
}
.rf-seg:last-of-type .rf-divider{ display:none; }

/* Nút Apply full-height, dính mép phải, cyan */
.rf-apply{
  align-self: stretch;              /* cao bằng container */
  height: 100%;
  display:flex; align-items:center; justify-content:center;
  background:#2fc9d4; color:#fff;
  border:none; border-left:1px solid #e2e8f0;
  padding: 0 28px;
  font-weight:700; font-size:18px; letter-spacing:.3px;
  border-top-right-radius: 999px; border-bottom-right-radius: 999px;
  transition: filter .12s ease, transform .06s ease;
}
.rf-apply:hover{ filter: brightness(.98); }
.rf-apply:active{ transform: translateY(1px); }

/* Nút Clear tùy chọn */
.rf-clear{
  margin-top: 8px; background:transparent; border:none;
  color:#2fb8bf; font-weight:600; padding:6px 8px; cursor:pointer;
}
.rf-clear:hover{ text-decoration: underline; }

/* Mobile */
@media (max-width: 960px){
  .rf-pill{
    grid-auto-flow: row;
    grid-auto-columns: unset;
  }
  .rf-seg{ padding: 12px 14px; }
  .rf-apply{
    width: calc(100% - 24px);
    margin: 8px 12px 12px;
    border-radius: 14px;
    border-left: none;
    padding: 12px 16px;
  }
  .rf-divider{ display:none; }
}
